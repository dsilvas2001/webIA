<div class="flex flex-col flex-auto min-w-0">
  <!-- Main -->
  <div class="flex-auto p-6 sm:p-10">
    <div class="text-3xl font-bold leading-6 text-slate-800 mb-4">
      Gestion de Estudiantes
    </div>

    <div class="flex flex-row-reverse py-3 pr-12">
      <label
        for="fileInput"
        class="px-5 py-2.5 flex justify-between gap-3 text-sm font-medium text-white items-center bg-blue-500 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 cursor-pointer"
      >
        <i class="fa-solid fa-file-excel fa-lg"></i>
        Cargar Excel
      </label>

      <input
        id="fileInput"
        type="file"
        class="hidden"
        (change)="readExcel($event)"
      />
    </div>

    <div
      *ngIf="!isLoading; else loadingSpinner"
      class="shadow-lg rounded-lg overflow-hidden mx-4 mt-30 md:mx-10"
    >
      <div class="overflow-x-auto md:overflow-x-visible">
        <table class="hidden md:table w-full table-fixed">
          <thead>
            <tr class="bg-gray-100">
              <th
                class="w-1/4 py-4 px-6 text-left text-gray-600 font-bold uppercase text-sm md:text-base"
              >
                Nombre
              </th>
              <th
                class="w-1/4 py-4 px-6 text-left text-gray-600 font-bold uppercase text-sm md:text-base"
              >
                Email
              </th>
              <th
                class="w-1/4 py-4 px-6 text-left text-gray-600 font-bold uppercase text-sm md:text-base"
              >
                Curso
              </th>
              <th
                class="w-1/4 py-4 px-6 text-left text-gray-600 font-bold uppercase text-sm md:text-base"
              >
                Estado
              </th>
            </tr>
          </thead>
          <tbody class="bg-white text-black">
            <tr *ngFor="let data of excelData">
              <td class="py-4 px-6 border-b border-gray-200">
                {{ data[0] }}
              </td>
              <td class="py-4 px-6 border-b border-gray-200">
                {{ data[1] }}
              </td>
              <td class="py-4 px-6 border-b border-gray-200">
                {{ data[2] }}
              </td>
              <td class="py-4 px-6 border-b border-gray-200">
                <span
                  class="p-2 rounded-xl text-white font-semibold"
                  [ngClass]="{
                    'bg-green-500': data[3] === 'ACTIVO',
                    'bg-red-500': data[3] === 'INACTIVO'
                  }"
                >
                  {{ data[3] }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- Diseño en tarjetas para pantallas pequeñas -->
        <!-- <div class="md:hidden space-y-4">
          <div class="bg-white shadow-md rounded-lg p-4">
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Nombre:</span> John
              Doe
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Email:</span>
              johndoegmail.com
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Curso:</span> 2
              Bachillerato
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Estado:</span>
              <span
                class="bg-green-500 text-white py-1 px-2 rounded-full text-xs"
                >Active</span
              >
            </div>
          </div>
          <div class="bg-white shadow-md rounded-lg p-4">
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Nombre:</span> John
              Doe
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Email:</span>
              johndoegmail.com
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Curso:</span> 2
              Bachillerato
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Estado:</span>
              <span
                class="bg-green-500 text-white py-1 px-2 rounded-full text-xs"
                >Active</span
              >
            </div>
          </div>
        </div> -->

        <div class="md:hidden space-y-4">
          <div
            *ngFor="let data of excelData"
            class="border shadow-lg rounded-lg p-4"
          >
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Nombre:</span>
              {{ data[0] }}
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Email:</span>
              {{ data[1] }}
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Curso:</span>
              {{ data[2] }}
            </div>
            <div class="mb-2">
              <span class="block text-gray-600 font-bold">Estado:</span>
              <span
                class="bg-green-500 text-white py-1 px-2 rounded-full text-xs"
                [ngClass]="{
                  'bg-green-500': data[3] === 'ACTIVO',
                  'bg-red-500': data[3] === 'INACTIVO'
                }"
              >
                {{ data[3] }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <app-notifications
      *ngIf="statusnotification"
      [statusnotification]="statusnotification"
      [title]="notificationTitle"
      [message]="notificationMessage"
      [type]="notificationType"
    ></app-notifications>

    <ng-template #loadingSpinner>
      <div class="flex items-center justify-center h-[50vh]">
        <div class="flex items-center justify-center">
          <div
            class="w-24 h-24 border-t-4 border-blue-500 border-solid rounded-full animate-spin"
          ></div>
          <div class="ml-4 text-lg text-blue-500 font-semibold">
            Cargando...
          </div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
